<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã”äºˆç´„ç¢ºèªã®ãŠçŸ¥ã‚‰ã›</title>
  <style>
    body {
      font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      line-height: 1.6;
      color: #333;
      background-color: #f9f9f9;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .header {
      background-color: #16a34a;
      color: white;
      padding: 30px 20px;
      text-align: center;
    }
    .header h1 {
      margin: 0;
      font-size: 24px;
      font-weight: bold;
    }
    .content {
      padding: 30px 20px;
    }
    .reception-number {
      background-color: #dcfce7;
      border: 2px solid #16a34a;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      margin: 20px 0;
    }
    .reception-number .label {
      font-size: 16px;
      color: #15803d;
      margin-bottom: 10px;
    }
    .reception-number .number {
      font-size: 32px;
      font-weight: bold;
      color: #15803d;
      letter-spacing: 2px;
    }
    .info-section {
      margin: 30px 0;
      border-left: 4px solid #16a34a;
      padding-left: 15px;
    }
    .info-section h3 {
      color: #16a34a;
      margin: 0 0 15px 0;
      font-size: 18px;
    }
    .info-table {
      width: 100%;
      border-collapse: collapse;
    }
    .info-table th,
    .info-table td {
      padding: 12px 8px;
      border-bottom: 1px solid #e5e7eb;
      text-align: left;
    }
    .info-table th {
      background-color: #f3f4f6;
      font-weight: bold;
      width: 30%;
      color: #374151;
    }
    .info-table td {
      color: #1f2937;
    }
    .highlight {
      background-color: #fef3c7;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
    }
    .highlight strong {
      color: #92400e;
    }
    .documents {
      background-color: #dbeafe;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    .documents h4 {
      color: #1e40af;
      margin: 0 0 15px 0;
    }
    .documents ul {
      margin: 0;
      padding-left: 20px;
    }
    .documents li {
      margin-bottom: 8px;
      color: #1e3a8a;
    }
    .footer {
      background-color: #f3f4f6;
      padding: 20px;
      text-align: center;
      color: #6b7280;
      font-size: 14px;
    }
    .contact-info {
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      padding: 15px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="header">
      <h1>ã”äºˆç´„ç¢ºèªã®ãŠçŸ¥ã‚‰ã›</h1>
      <p>å¯Œå£«ä¼Šè±†è¾²æ¥­å”åŒçµ„åˆ</p>
    </div>

    <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="content">
      <p><strong><%= @appointment.name %></strong> æ§˜</p>
      
      <p>
        ã“ã®åº¦ã¯ã€å¯Œå£«ä¼Šè±†è¾²æ¥­å”åŒçµ„åˆã®ç›¸ç¶šç›¸è«‡ã‚’ã”äºˆç´„ã„ãŸã ãã€èª ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br>
        ä»¥ä¸‹ã®å†…å®¹ã§ã”äºˆç´„ã‚’æ‰¿ã‚Šã¾ã—ãŸã€‚
      </p>

      <!-- å—ä»˜ç•ªå· -->
      <div class="reception-number">
        <div class="label">å—ä»˜ç•ªå·</div>
        <div class="number"><%= @reception_number %></div>
        <div style="margin-top: 10px; font-size: 14px; color: #15803d;">
          â€» ãŠå•ã„åˆã‚ã›ã®éš›ã¯ã€ã“ã®ç•ªå·ã‚’ãŠä¼ãˆãã ã•ã„
        </div>
      </div>

      <!-- äºˆç´„æƒ…å ± -->
      <div class="info-section">
        <h3>ğŸ“… ã”äºˆç´„å†…å®¹</h3>
        <table class="info-table">
          <tr>
            <th>äºˆç´„æ—¥</th>
            <td>
              <strong><%= @slot.starts_at.strftime('%Yå¹´%-mæœˆ%-dæ—¥') %>ï¼ˆ<%= %w[æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ][@slot.starts_at.wday] %>æ›œæ—¥ï¼‰</strong>
            </td>
          </tr>
          <tr>
            <th>æ™‚é–“</th>
            <td><strong><%= @slot.starts_at.strftime('%H:%M') %> - <%= @slot.ends_at.strftime('%H:%M') %></strong></td>
          </tr>
          <tr>
            <th>ç›¸è«‡ç¨®åˆ¥</th>
            <td><%= @appointment_type.name %></td>
          </tr>
          <tr>
            <th>ã”æ¥åº—äººæ•°</th>
            <td><%= @appointment.party_size %>åæ§˜</td>
          </tr>
        </table>
      </div>

      <!-- æ”¯åº—æƒ…å ± -->
      <div class="info-section">
        <h3>ğŸ¢ ã”æ¥åº—å…ˆ</h3>
        <table class="info-table">
          <tr>
            <th>æ”¯åº—å</th>
            <td><strong><%= @branch.name %></strong></td>
          </tr>
          <tr>
            <th>ä½æ‰€</th>
            <td><%= @branch.address %></td>
          </tr>
          <tr>
            <th>é›»è©±ç•ªå·</th>
            <td>
              <% phone = @branch.phone %>
              <%= phone.gsub(/(\d{4})(\d{2})(\d{4})/, '\1-\2-\3') if phone.length == 10 %>
              <%= phone.gsub(/(\d{3})(\d{4})(\d{4})/, '\1-\2-\3') if phone.length == 11 %>
            </td>
          </tr>
          <tr>
            <th>å–¶æ¥­æ™‚é–“</th>
            <td style="white-space: pre-line;"><%= @branch.open_hours %></td>
          </tr>
        </table>
      </div>

      <% if @appointment.purpose.present? %>
        <!-- ç›¸è«‡å†…å®¹ -->
        <div class="info-section">
          <h3>ğŸ’­ ã”ç›¸è«‡å†…å®¹</h3>
          <div style="background-color: #f9fafb; padding: 15px; border-radius: 6px; white-space: pre-line;">
            <%= @appointment.purpose %>
          </div>
        </div>
      <% end %>

      <!-- æ¥åº—æ™‚ã®ãŠé¡˜ã„ -->
      <div class="highlight">
        <strong>ğŸ•’ ã”æ¥åº—æ™‚ã®ãŠé¡˜ã„</strong><br>
        ã”äºˆç´„æ™‚é–“ã®<strong>10åˆ†å‰</strong>ã¾ã§ã«ãŠè¶Šã—ãã ã•ã„ã€‚<br>
        ã”éƒ½åˆãŒæ‚ªããªã£ãŸå ´åˆã¯ã€ãŠæ—©ã‚ã«ãŠé›»è©±ã§ã”é€£çµ¡ãã ã•ã„ã€‚
      </div>

      <!-- æŒå‚æ›¸é¡ -->
      <div class="documents">
        <h4>ğŸ“„ ã”æŒå‚ã„ãŸã ãæ›¸é¡</h4>
        <ul>
          <li><strong>æœ¬äººç¢ºèªæ›¸é¡</strong>ï¼ˆé‹è»¢å…è¨±è¨¼ã€ãƒ‘ã‚¹ãƒãƒ¼ãƒˆã€ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼ã‚«ãƒ¼ãƒ‰ãªã©ï¼‰</li>
          <li><strong>å°é‘‘</strong>ï¼ˆèªå°ã§çµæ§‹ã§ã™ï¼‰</li>
          <li><strong>ç›¸ç¶šé–¢é€£æ›¸é¡</strong>ï¼ˆéºè¨€æ›¸ã€æˆ¸ç±è¬„æœ¬ã€å›ºå®šè³‡ç”£ç¨ç´ç¨é€šçŸ¥æ›¸ãªã©ã€ãŠæŒã¡ã®ç¯„å›²ã§ï¼‰</li>
          <li><strong>é€šå¸³ãƒ»è¨¼æ›¸é¡</strong>ï¼ˆé é‡‘é€šå¸³ã€ä¿é™ºè¨¼æ›¸ãªã©ã€ãŠæŒã¡ã®ç¯„å›²ã§ï¼‰</li>
        </ul>
        <p style="margin: 10px 0 0 0; font-size: 14px; color: #1e3a8a;">
          â€» äº‹å‰ã«è³‡æ–™ã‚’ãŠæŒã¡ã„ãŸã ãã“ã¨ã§ã€ã‚ˆã‚Šå…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå¯èƒ½ã§ã™
        </p>
      </div>

      <!-- ãŠå•ã„åˆã‚ã›å…ˆ -->
      <div class="contact-info">
        <strong>ğŸ“ ãŠå•ã„åˆã‚ã›ãƒ»å¤‰æ›´ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«</strong><br>
        <strong><%= @branch.name %></strong><br>
        é›»è©±ï¼š<% phone = @branch.phone %>
        <%= phone.gsub(/(\d{4})(\d{2})(\d{4})/, '\1-\2-\3') if phone.length == 10 %>
        <%= phone.gsub(/(\d{3})(\d{4})(\d{4})/, '\1-\2-\3') if phone.length == 11 %><br>
        å—ä»˜æ™‚é–“ï¼š<%= @branch.open_hours.gsub(/\n/, 'ã€€') %>
      </div>

      <p>
        ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚<br>
        <%= @appointment.name %>æ§˜ã®ã”æ¥åº—ã‚’å¿ƒã‚ˆã‚ŠãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚
      </p>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <div class="footer">
      <p>
        å¯Œå£«ä¼Šè±†è¾²æ¥­å”åŒçµ„åˆ<br>
        ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯é€ä¿¡å°‚ç”¨ã§ã™ã€‚è¿”ä¿¡ã„ãŸã ã„ã¦ã‚‚ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚
      </p>
    </div>
  </div>
</body>
</html>